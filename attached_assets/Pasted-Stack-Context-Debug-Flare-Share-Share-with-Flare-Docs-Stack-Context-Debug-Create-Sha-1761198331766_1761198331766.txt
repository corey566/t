Stack
Context
Debug
Flare
Share
Share with Flare
Docs

Stack

Context

Debug
Create Share
Docs

Ignition Settings
Docs
Editor

PhpStorm
Theme
auto
Save settings
Settings will be saved locally in ~/.ignition.json.

Cannot use isset() on the result of an expression (you can use "null !== expression" instead)
Symfony
 \ 
Component
 \ 
ErrorHandler
 \ 
Error
 \ 
FatalError
PHP 8.4.13
9.52.21
Cannot use isset() on the result of an expression (you can use "null !== expression" instead)

Collapse vendor frames
Modules
 / 
Gallface
 / 
Listeners
 / 
UserLoggedInListener
.php
 
: 21
[top]
Modules
 / 
Gallface
 / 
Listeners
 / 
UserLoggedInListener
.php
 
: 21































use Illuminate\Support\Facades\DB;

use Modules\Gallface\Models\LocationApiCredential;

use Modules\Gallface\Services\HcmApiService;



class UserLoggedInListener

{

    public function handle($event)

    {

        try {

            // Get the user from the event

            $user = $event->user ?? auth()->user();



            if (!$user || !isset($user->location_id)) {

                Log::info('HCM Ping Skipped - No user or location_id', [

                    'has_user' => isset($user),

                    'has_location' => isset($user->location_id ?? null)

                ]);

                return;

            }



            $locationId = $user->location_id;

            $businessId = $user->business_id;

            $userId = $user->id;

            $username = $user->username ?? $user->first_name ?? 'Unknown';

            $ipAddress = request()->ip();



            Log::info('User Login Detected', [

                'user_id' => $userId,

                'username' => $username,

                'location_id' => $locationId,
App
Routing
Request
Browser
Headers
Body
Context
User
Versions
App
Routing
Controller
App\Http\Controllers\Auth\LoginController@login

Middleware
web

setData

guest

Request
https://zimozo.com/login
POST
curl "https://zimozo.com/login" \
   -X POST \
   -H 'cookie: XSRF-TOKEN=eyJpdiI6InJPL0Q3UzRSYTVmUzFVcklNUWhkUXc9PSIsInZhbHVlIjoiZEVoQUFpN0t0TDcxdi8wQXNGRldVSlZUN2NZUVVXZUpsN0hxa1pMVzI2M1dkYmNOc0gvK010d0JRRnhuWE1yY0FIdG0zcHI3SlppN25GQWRCL3BHQU5FTWszRjJlSlJVQ1pFeFdHVUlkTytQT21iZk04UXYwdDVTcEpYZkIwOEwiLCJtYWMiOiJjZGFhY2YyOGNlNjJlZmRhZjUzZTk3ZTcyZmNiOGFmNmIwNjc1YTJmNzQ3ZWViNGJlYjk1ZDllNDU2OGYwMWNjIiwidGFnIjoiIn0%3D; zimozo_pos_session=eyJpdiI6Ikl0UnhIeDB3d1pTTzlUQVVtam15emc9PSIsInZhbHVlIjoiNmZhNG10UkxYWkFDSjV6TGVGMUMwbDJtZUU5Nm1ZeFcwNjF0dUlQbWdndjQ5dnUrZlp2UWRLd3Qyc0pPNkF4cSs0RWNxWUpSZXJUYXkyQVVYNkZIYjBBU0FGdml2Z05CUGt3SXc2UjJCa0FNRWwxUXV5NG8vcGhjem1OWXZDVFUiLCJtYWMiOiJlZDJmMjFjMzZlYTU2MmE3MTliNTU3Y2E2NjA1OTI1ZWU1NTEyZjljNWVkZTY1NjY4ZDNlN2Q1ZWU2NDU3ZTMxIiwidGFnIjoiIn0%3D' \
   -H 'priority: u=0, i' \
   -H 'accept-language: en-US,en;q=0.9' \
   -H 'accept-encoding: gzip, deflate, br, zstd' \
   -H 'referer: https://zimozo.com/login' \
   -H 'sec-fetch-dest: document' \
   -H 'sec-fetch-user: ?1' \
   -H 'sec-fetch-mode: navigate' \
   -H 'sec-fetch-site: same-origin' \
   -H 'accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7' \
   -H 'user-agent: Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36' \
   -H 'upgrade-insecure-requests: 1' \
   -H 'content-type: application/x-www-form-urlencoded' \
   -H 'origin: https://zimozo.com' \
   -H 'sec-ch-ua-platform: "Windows"' \
   -H 'sec-ch-ua-mobile: ?0' \
   -H 'sec-ch-ua: "Google Chrome";v="141", "Not?A_Brand";v="8", "Chromium";v="141"' \
   -H 'cache-control: max-age=0' \
   -H 'content-length: 1694' \
   -H 'connection: close' \
   -H 'x-accel-internal: /internal-nginx-static-location' \
   -H 'x-real-ip: 112.134.210.149' \
   -H 'host: zimozo.com' \
   -F '_token=Fhbmf6cDnpEEBQH62luMBwUE7cThFQIuY1SWspSC' -F 'username=yazeed' -F 'password=<CENSORED>' -F 'g-recaptcha-response=0cAFcWeA6MvcjuABJAxom3Le-naliv1wxJ_aUZz1G4SN2cZm5Bvam-BJQ46I4juAhvZ61pIheWrUeLFu5DIglbuJRTaH3p5-nQ6TpLd3Vrf9RlZjmwmPgjbvF-j09GZFDvAznR7kibOFEhJkSztKat3ytGAGqo3Uu86Ms-loXAwS2OaKm1770Bd4zS7kisJUf9XhHT95LpTblgZ_hTs8Lpa6YGdfdRChHAOZhqjnQmcR7OgeEbTnDeCQc8xSU47VXdYbgdaoNWE1P9-nyuJLjxA8pMtueNutVua7dODASoMSeaeKO5SSlDdb2uYlUKqMETLZGgmNOkWkvXHfP-__rXXkaIIVd7kiMhVVLwu-NFrTj1qeG6O_-M9wseqasVHROUPpozZbmVAqLVAlffHYhzZ6ALZJGYRn1_ay2uKJLY9VR1liru9-FGq9AuCQxhRhgTOUmX4Yjrc7lkv8TyVg2WdlsOmkgPXjfIYqUjcxBROkNYeuoHFqRlbIL-6nnxLHqBYyiSp9qFGxlVjdoSY8Qb3owmCCi2r_F00Vcv7uVKwxamLJK3JckNYGMyhA-Aoaw-Xjtl3Vken6xqiThdpp9hAoE4AzxMJ9dKL2LdhD8gtFMTQdplMIf93wx5R7kD-S5k8ao-irBqURL5iM_SW-4byE3T8VMYR4rF_ir80_13N6LYzbVbDqa3D8t1NLPYM7R-CTj_swlT7WwC2vRN3hGCfJnd3PlcKe448s6HDUKXDxfU8ETN7yE-Aj6ZiPPSkvhFZymd1bhuQ7EXRLhEkgVs70lpi0QeiqxS6fZzS-a8RMaAWhHPnGD6H4A8zhNrzAb-ORGN_Ub5wN195awlsy0QTt07Xx8tB7n2Tg5W9fQXs9iN5azY2xBNKLkuqBNHoAqP_c7mzX6Z78J7bUY-c9LIi7JZGhm2NEdsQqyzV4awGjthxVLwFNlo5COVyW0kA_UvaR6TvS2Yvv3TKzFIt4uYh4--3vgVBotuF013IjsFukn85szzV_kZACnZyQyliyBpLfqKUPU90YpomwqJTO26tzq37dslP71u-6RKfGef7H8xALV2OomyvCaiXVasRt86Gxp3xK8HFY0uoLlOs0xYo432mRX2xDkbfLJ4P0z2v1ICIEItMgNlgSAT0TshvGyHDsNh9i4usolBvYAsT7b9I8igBGrqNWH5L6z_ZO9jhtR1kOrILjwXzQjc6hrCzBDtvCUlEFRNjAKCBu_3IEmaFuSkgdL1gC9WQbVnEvZaoQGKqeNYD1DgznQBYqkwdeB-BcCjaFzSNTFb0RoNq2iczh-hvgoQ_DVfLomhCXq2QowTRNBydjpWqIRxfZX01jjS1XVJi-Pi9VqEoaMj7uqLGKP0-KvRYaEgPSVRhTjhlyHJyNJdx-OvGWU6Kb0XJeTmVoTs-B3bz2LejGW2GLobx36ftxZiy8rjluTbML7uMSRUFrkaCo3Ps_BE199lMq9e734lKzz_VwQ6xyRmnuU0ab3RDLIZZoV8aiTJ3GVYq2PF_lGUru14e349fN2jIq66uOH033klNqCq5lO79CdLwOV36dZIJropqdYO9mGqtXgkmi-xsy293Q4'


Browser
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36

Headers
cookie
XSRF-TOKEN=eyJpdiI6InJPL0Q3UzRSYTVmUzFVcklNUWhkUXc9PSIsInZhbHVlIjoiZEVoQUFpN0t0TDcxdi8wQXNGRldVSlZUN2NZUVVXZUpsN0hxa1pMVzI2M1dkYmNOc0gvK010d0JRRnhuWE1yY0FIdG0zcHI3SlppN25GQWRCL3BHQU5FTWszRjJlSlJVQ1pFeFdHVUlkTytQT21iZk04UXYwdDVTcEpYZkIwOEwiLCJtYWMiOiJjZGFhY2YyOGNlNjJlZmRhZjUzZTk3ZTcyZmNiOGFmNmIwNjc1YTJmNzQ3ZWViNGJlYjk1ZDllNDU2OGYwMWNjIiwidGFnIjoiIn0%3D; zimozo_pos_session=eyJpdiI6Ikl0UnhIeDB3d1pTTzlUQVVtam15emc9PSIsInZhbHVlIjoiNmZhNG10UkxYWkFDSjV6TGVGMUMwbDJtZUU5Nm1ZeFcwNjF0dUlQbWdndjQ5dnUrZlp2UWRLd3Qyc0pPNkF4cSs0RWNxWUpSZXJUYXkyQVVYNkZIYjBBU0FGdml2Z05CUGt3SXc2UjJCa0FNRWwxUXV5NG8vcGhjem1OWXZDVFUiLCJtYWMiOiJlZDJmMjFjMzZlYTU2MmE3MTliNTU3Y2E2NjA1OTI1ZWU1NTEyZjljNWVkZTY1NjY4ZDNlN2Q1ZWU2NDU3ZTMxIiwidGFnIjoiIn0%3D

priority
u=0, i

accept-language
en-US,en;q=0.9

accept-encoding
gzip, deflate, br, zstd

referer
https://zimozo.com/login

sec-fetch-dest
document

sec-fetch-user
?1

sec-fetch-mode
navigate

sec-fetch-site
same-origin

accept
text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.7

user-agent
Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/141.0.0.0 Safari/537.36

upgrade-insecure-requests
1

content-type
application/x-www-form-urlencoded

origin
https://zimozo.com

sec-ch-ua-platform
"Windows"

sec-ch-ua-mobile
?0

sec-ch-ua
"Google Chrome";v="141", "Not?A_Brand";v="8", "Chromium";v="141"

cache-control
max-age=0

content-length
1694

connection
close

x-accel-internal
/internal-nginx-static-location

x-real-ip
112.134.210.149

host
zimozo.com

Body
{
    "_token": "Fhbmf6cDnpEEBQH62luMBwUE7cThFQIuY1SWspSC",
    "username": "yazeed",
    "password": "<CENSORED>",
    "g-recaptcha-response": "0cAFcWeA6MvcjuABJAxom3Le-naliv1wxJ_aUZz1G4SN2cZm5Bvam-BJQ46I4juAhvZ61pIheWrUeLFu5DIglbuJRTaH3p5-nQ6TpLd3Vrf9RlZjmwmPgjbvF-j09GZFDvAznR7kibOFEhJkSztKat3ytGAGqo3Uu86Ms-loXAwS2OaKm1770Bd4zS7kisJUf9XhHT95LpTblgZ_hTs8Lpa6YGdfdRChHAOZhqjnQmcR7OgeEbTnDeCQc8xSU47VXdYbgdaoNWE1P9-nyuJLjxA8pMtueNutVua7dODASoMSeaeKO5SSlDdb2uYlUKqMETLZGgmNOkWkvXHfP-__rXXkaIIVd7kiMhVVLwu-NFrTj1qeG6O_-M9wseqasVHROUPpozZbmVAqLVAlffHYhzZ6ALZJGYRn1_ay2uKJLY9VR1liru9-FGq9AuCQxhRhgTOUmX4Yjrc7lkv8TyVg2WdlsOmkgPXjfIYqUjcxBROkNYeuoHFqRlbIL-6nnxLHqBYyiSp9qFGxlVjdoSY8Qb3owmCCi2r_F00Vcv7uVKwxamLJK3JckNYGMyhA-Aoaw-Xjtl3Vken6xqiThdpp9hAoE4AzxMJ9dKL2LdhD8gtFMTQdplMIf93wx5R7kD-S5k8ao-irBqURL5iM_SW-4byE3T8VMYR4rF_ir80_13N6LYzbVbDqa3D8t1NLPYM7R-CTj_swlT7WwC2vRN3hGCfJnd3PlcKe448s6HDUKXDxfU8ETN7yE-Aj6ZiPPSkvhFZymd1bhuQ7EXRLhEkgVs70lpi0QeiqxS6fZzS-a8RMaAWhHPnGD6H4A8zhNrzAb-ORGN_Ub5wN195awlsy0QTt07Xx8tB7n2Tg5W9fQXs9iN5azY2xBNKLkuqBNHoAqP_c7mzX6Z78J7bUY-c9LIi7JZGhm2NEdsQqyzV4awGjthxVLwFNlo5COVyW0kA_UvaR6TvS2Yvv3TKzFIt4uYh4--3vgVBotuF013IjsFukn85szzV_kZACnZyQyliyBpLfqKUPU90YpomwqJTO26tzq37dslP71u-6RKfGef7H8xALV2OomyvCaiXVasRt86Gxp3xK8HFY0uoLlOs0xYo432mRX2xDkbfLJ4P0z2v1ICIEItMgNlgSAT0TshvGyHDsNh9i4usolBvYAsT7b9I8igBGrqNWH5L6z_ZO9jhtR1kOrILjwXzQjc6hrCzBDtvCUlEFRNjAKCBu_3IEmaFuSkgdL1gC9WQbVnEvZaoQGKqeNYD1DgznQBYqkwdeB-BcCjaFzSNTFb0RoNq2iczh-hvgoQ_DVfLomhCXq2QowTRNBydjpWqIRxfZX01jjS1XVJi-Pi9VqEoaMj7uqLGKP0-KvRYaEgPSVRhTjhlyHJyNJdx-OvGWU6Kb0XJeTmVoTs-B3bz2LejGW2GLobx36ftxZiy8rjluTbML7uMSRUFrkaCo3Ps_BE199lMq9e734lKzz_VwQ6xyRmnuU0ab3RDLIZZoV8aiTJ3GVYq2PF_lGUru14e349fN2jIq66uOH033klNqCq5lO79CdLwOV36dZIJropqdYO9mGqtXgkmi-xsy293Q4"
}


Context
User
2002yazeedfaumy@gmail.com
2002yazeedfaumy@gmail.com

{
    "id": 262,
    "user_type": "user",
    "surname": "Mr",
    "first_name": "Mohamed Yazeed",
    "last_name": "Faumy",
    "username": "yazeed",
    "email": "2002yazeedfaumy@gmail.com",
    "language": "en",
    "contact_no": null,
    "address": null,
    "business_id": 111,
    "available_at": null,
    "paused_at": null,
    "essentials_department_id": null,
    "essentials_designation_id": null,
    "essentials_salary": null,
    "essentials_pay_period": null,
    "essentials_pay_cycle": null,
    "max_sales_discount_percent": null,
    "allow_login": 1,
    "status": "active",
    "is_enable_service_staff_pin": 0,
    "service_staff_pin": null,
    "crm_contact_id": null,
    "is_cmmsn_agnt": 0,
    "cmmsn_percent": "0.00",
    "selected_contacts": 0,
    "dob": null,
    "gender": null,
    "marital_status": null,
    "blood_group": null,
    "contact_number": null,
    "alt_number": null,
    "family_number": null,
    "fb_link": null,
    "twitter_link": null,
    "social_media_1": null,
    "social_media_2": null,
    "permanent_address": null,
    "current_address": null,
    "guardian_name": null,
    "custom_field_1": null,
    "custom_field_2": null,
    "custom_field_3": null,
    "custom_field_4": null,
    "bank_details": null,
    "id_proof_name": null,
    "id_proof_number": null,
    "crm_department": null,
    "crm_designation": null,
    "location_id": null,
    "deleted_at": null,
    "created_at": "2025-08-19T10:32:56.000000Z",
    "updated_at": "2025-08-19T10:32:56.000000Z"
}


Versions
Php Version
8.4.13

Laravel Version
9.52.21

Laravel Locale
en

Laravel Config Cached
false
App Debug
true
App Env
live


7
Queries

3
Logs
11:14:58 AM
1.62ms
mysql
select * from `system` where `key` = crm_version limit 1


1 query parameter
11:14:58 AM
0.46ms
mysql
select * from `system` where `key` = woocommerce_version limit 1


1 query parameter
11:14:58 AM
0.52ms
mysql
select * from `business` where `woocommerce_api_settings` is not null


11:14:58 AM
0.43ms
mysql
select * from `system` where `key` = woocommerce_version limit 1


1 query parameter
11:14:58 AM
0.49ms
mysql
select * from `business` where `woocommerce_api_settings` is not null


11:14:58 AM
0.96ms
mysql
select * from `users` where `username` = yazeed and `users`.`deleted_at` is null limit 1


1 query parameter
11:14:58 AM
0.69ms
mysql
select * from `users` where `id` = 262 and `users`.`deleted_at` is null limit 1


1 query parameter
·
Source
·
Docs
·
Laravel
Ignition is built byFlare, the Laravel error reporting service.